version: "3"

tasks:
  go:test:
    cmds:
      - go test github.com/ecshreve/slomad/...

  go:test:verbose:
    cmds:
      - go test -v github.com/ecshreve/slomad/...

  go:build:
    generates:
      - bin/slomad
    sources:
      - ./**/*.go
      - ./**/config/*.yml
    cmds:
      - go build -o bin/slomad github.com/ecshreve/slomad/cmd/slomad

  go:run:
    deps:
      - go:build
    cmds:
      - bin/slomad